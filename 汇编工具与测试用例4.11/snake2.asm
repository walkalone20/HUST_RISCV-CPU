.data
next:
	.space	32
dir:
	.word	0
head:
	.word	0
tail:
	.word	0
snakex:
	.space	4096
snakey:
	.space	4096
foodx:
	.word	0
foody:
	.word	0
score:
	.word	0
foodstatus:
	.word	0
vis:
	.space	128
ed:
	.space	128
.text
main:
	li	sp,122840
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	sw	zero,(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	li	a4,1
	sw	a4,4(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	li	a4,1
	sw	a4,8(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	sw	zero,12(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	li	a4,-1
	sw	a4,16(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	sw	zero,20(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	sw	zero,24(a5)
	lui	a5,%hi(next)
	addi	a5,a5,%lo(next)
	li	a4,-1
	sw	a4,28(a5)
	lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,327680
        sw      a4,40(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,356352
        addi    a4,a4,1280
        sw      a4,44(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,151552
        addi    a4,a4,1280
        sw      a4,48(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,159744
        addi    a4,a4,1792
        sw      a4,52(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,131072
        sw      a4,56(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,4194304
        addi    a4,a4,32
        sw      a4,64(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,4665344
        addi    a4,a4,1824
        sw      a4,68(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,4530176
        addi    a4,a4,1568
        sw      a4,72(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,4677632
        addi    a4,a4,1792
        sw      a4,76(a5)
        lui     a5,%hi(ed)
        addi    a5,a5,%lo(ed)
        li      a4,7340064
        sw      a4,80(a5)
	lui	a5,%hi(foodx)
	li	a4,10
	addi	a5,a5,%lo(foodx)
	sw	a4,(a5)
	lui	a5,%hi(foody)
	li	a4,5
	addi	a5,a5,%lo(foody)
	sw	a4,(a5)
	lui	a5,%hi(foodstatus)
	addi	a5,a5,%lo(foodstatus)
	sw	zero,(a5)
	lui	a5,%hi(snakey)
	li	a4,16
	addi	a5,a5,%lo(snakey)
	sw	a4,(a5)
	lui	a5,%hi(snakey)
	lw	a4,%lo(snakey)(a5)
	lui	a5,%hi(snakex)
	addi	a5,a5,%lo(snakex)
	sw	a4,(a5)
	lui	a5,%hi(vis)
	addi	a5,a5,%lo(vis)
	li	a4,65536
	sw	a4,64(a5)
.L10:
	lui	a5,%hi(head)
	lw	a5,%lo(head)(a5)
	addi	a4,a5,1
	srai	a5,a4,31
	srli	a5,a5,22
	add	a4,a4,a5
	andi	a4,a4,1023
	sub	a5,a4,a5
	sw	a5,-32(s0)
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(dir)
	lw	a3,%lo(dir)(a5)
	lui	a5,%hi(next)
	slli	a3,a3,3
	addi	a5,a5,%lo(next)
	add	a5,a3,a5
	lw	a5,0(a5)
	add	a4,a4,a5
	lui	a5,%hi(snakex)
	lw	a3,-32(s0)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakex)
	add	a5,a3,a5
	sw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakey)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(dir)
	lw	a3,%lo(dir)(a5)
	lui	a5,%hi(next)
	slli	a3,a3,3
	addi	a5,a5,%lo(next)
	add	a5,a3,a5
	lw	a5,4(a5)
	add	a4,a4,a5
	lui	a5,%hi(snakey)
	lw	a3,-32(s0)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	sw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a4,-32(s0)
	addi	a5,a5,%lo(head)
	sw	a4,(a5)
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a5,0(a5)
	bltz	a5,.L2
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	li	a5,31
	bgt	a4,a5,.L2
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakey)
	add	a5,a4,a5
	lw	a5,0(a5)
	bltz	a5,.L2
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakey)
	add	a5,a4,a5
	lw	a4,0(a5)
	li	a5,31
	bgt	a4,a5,.L2
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(foodx)
	lw	a5,%lo(foodx)(a5)
	bne	a4,a5,.L3
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakey)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(foody)
	lw	a5,%lo(foody)(a5)
	bne	a4,a5,.L3
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(vis)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a3,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	lw	a5,0(a5)
	srl	a5,a4,a5
	andi	a5,a5,1
	sw	a5,-36(s0)
	lw	a5,-36(s0)
	bnez	a5,.L14
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(vis)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a3,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	lw	a5,0(a5)
	li	a3,1
	sll	a5,a3,a5
	lui	a3,%hi(head)
	lw	a2,%lo(head)(a3)
	lui	a3,%hi(snakex)
	slli	a2,a2,2
	addi	a3,a3,%lo(snakex)
	add	a3,a2,a3
	lw	a3,0(a3)
	or	a4,a4,a5
	lui	a5,%hi(vis)
	slli	a3,a3,2
	addi	a5,a5,%lo(vis)
	add	a5,a3,a5
	sw	a4,0(a5)
	lui	a5,%hi(foodx)
	lw	a4,%lo(foodx)(a5)
	mv	a5,a4
	slli	a5,a5,4
	add	a5,a5,a4
	addi	a4,a5,13
	srai	a5,a4,31
	srli	a5,a5,27
	add	a4,a4,a5
	andi	a4,a4,31
	sub	a5,a4,a5
	mv	a4,a5
	lui	a5,%hi(foodx)
	addi	a5,a5,%lo(foodx)
	sw	a4,(a5)
	lui	a5,%hi(foody)
	lw	a4,%lo(foody)(a5)
	mv	a5,a4
	slli	a5,a5,4
	add	a5,a5,a4
	addi	a4,a5,13
	srai	a5,a4,31
	srli	a5,a5,27
	add	a4,a4,a5
	andi	a4,a4,31
	sub	a5,a4,a5
	mv	a4,a5
	lui	a5,%hi(foody)
	addi	a5,a5,%lo(foody)
	sw	a4,(a5)
	lui	a5,%hi(score)
	lw	a5,%lo(score)(a5)
	addi	a4,a5,1
	mv	a0,a4
	addi	a7,zero,98
	ecall
	lui	a5,%hi(score)
	addi	a5,a5,%lo(score)
	sw	a4,(a5)
	lui	a5,%hi(foodstatus)
	li	a4,1
	addi	a5,a5,%lo(foodstatus)
	sw	a4,(a5)
	j	.L5
.L3:
	lui	a5,%hi(tail)
	lw	a4,%lo(tail)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(vis)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(tail)
	lw	a3,%lo(tail)(a5)
	lui	a5,%hi(snakey)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	lw	a5,0(a5)
	li	a3,1
	sll	a5,a3,a5
	lui	a3,%hi(tail)
	lw	a2,%lo(tail)(a3)
	lui	a3,%hi(snakex)
	slli	a2,a2,2
	addi	a3,a3,%lo(snakex)
	add	a3,a2,a3
	lw	a3,0(a3)
	xor	a4,a4,a5
	lui	a5,%hi(vis)
	slli	a3,a3,2
	addi	a5,a5,%lo(vis)
	add	a5,a3,a5
	sw	a4,0(a5)
	lui	a5,%hi(tail)
	lw	a5,%lo(tail)(a5)
	addi	a4,a5,1
	srai	a5,a4,31
	srli	a5,a5,22
	add	a4,a4,a5
	andi	a4,a4,1023
	sub	a5,a4,a5
	mv	a4,a5
	lui	a5,%hi(tail)
	addi	a5,a5,%lo(tail)
	sw	a4,(a5)
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(vis)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a3,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	lw	a5,0(a5)
	srl	a5,a4,a5
	andi	a5,a5,1
	sw	a5,-40(s0)
	lw	a5,-40(s0)
	bnez	a5,.L15
	lui	a5,%hi(head)
	lw	a4,%lo(head)(a5)
	lui	a5,%hi(snakex)
	slli	a4,a4,2
	addi	a5,a5,%lo(snakex)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(vis)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a4,0(a5)
	lui	a5,%hi(head)
	lw	a3,%lo(head)(a5)
	lui	a5,%hi(snakey)
	slli	a3,a3,2
	addi	a5,a5,%lo(snakey)
	add	a5,a3,a5
	lw	a5,0(a5)
	li	a3,1
	sll	a5,a3,a5
	lui	a3,%hi(head)
	lw	a2,%lo(head)(a3)
	lui	a3,%hi(snakex)
	slli	a2,a2,2
	addi	a3,a3,%lo(snakex)
	add	a3,a2,a3
	lw	a3,0(a3)
	or	a4,a4,a5
	lui	a5,%hi(vis)
	slli	a3,a3,2
	addi	a5,a5,%lo(vis)
	add	a5,a3,a5
	sw	a4,0(a5)
	lui	a5,%hi(foodstatus)
	lw	a5,%lo(foodstatus)(a5)
	xori	a4,a5,1
	lui	a5,%hi(foodstatus)
	addi	a5,a5,%lo(foodstatus)
	sw	a4,(a5)
.L5:
	sw	zero,-20(s0)
	j	.L7
.L9:
	lui	a5,%hi(vis)
	lw	a4,-20(s0)
	slli	a4,a4,2
	addi	a5,a5,%lo(vis)
	add	a5,a4,a5
	lw	a5,0(a5)
	sw	a5,-24(s0)
	lui	a5,%hi(foodx)
	lw	a5,%lo(foodx)(a5)
	lw	a4,-20(s0)
	bne	a4,a5,.L8
	lui	a5,%hi(foody)
	lw	a5,%lo(foody)(a5)
	lw	a4,-24(s0)
	srl	a5,a4,a5
	andi	a5,a5,1
	lui	a4,%hi(foodstatus)
	lw	a4,%lo(foodstatus)(a4)
	beq	a5,a4,.L8
	lui	a5,%hi(foody)
	lw	a5,%lo(foody)(a5)
	li	a4,1
	sll	a5,a4,a5
	lw	a4,-24(s0)
	xor	a5,a4,a5
	sw	a5,-24(s0)
.L8:
	lw	a5,-24(s0)
	mv      a0,a5
	addi    a7,zero,34
        ecall
	lw	a5,-20(s0)
	addi	a5,a5,1
	sw	a5,-20(s0)
.L7:
	lw	a4,-20(s0)
	li	a5,31
	ble	a4,a5,.L9
	j	.L10
.L14:
        nop
	j	.L2
.L15:
        nop
.L2:
	sw	zero,-28(s0)
	j	.L11
.L12:
	lui	a5,%hi(ed)
	lw	a4,-28(s0)
	slli	a4,a4,2
	addi	a5,a5,%lo(ed)
	add	a5,a4,a5
	lw	a5,0(a5)
	sw	a5,-44(s0)
        mv      a0,a5
	addi    a7,zero,34
        ecall
	lw	a5,-28(s0)
	addi	a5,a5,1
	sw	a5,-28(s0)
.L11:
	lw	a4,-28(s0)
	li	a5,31
	ble	a4,a5,.L12
	li	a5,0
	mv	a0,a5
	addi    a7,zero,10
        ecall
interrupt:
	sw	a3,0(sp)
	addi	sp,sp,4
	sw	a4,0(sp)
	addi	sp,sp,4
	sw	a5,0(sp)
	addi	sp,sp,4
	
	lui	a5,%hi(dir)
	li	a4,114514
	addi	a3,a5,%lo(dir)
	sw	a4,(a3)
	
	addi	sp,sp,-4
	lw	a5,0(sp)
	addi	sp,sp,-4
	lw	a4,0(sp)
	addi	sp,sp,-4
	lw	a3,0(sp)
	uret
